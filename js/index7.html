<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rechercher un verbe français</title>
  <style>
#output {
  margin-top: 30px;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 8px;
  background-color: #fdfdfd;
  font-family: "Segoe UI", sans-serif;
  max-width: 800px;
  font-size: 12px; /* reduced font size */
  line-height: 1.4;
}
 
  #output h2 {
    margin-bottom: 10px;
    color: #2c3e50;
    border-bottom: 2px solid #3498db;
    padding-bottom: 5px;
  }

  #output h3 {
    margin-top: 20px;
    margin-bottom: 5px;
    color: #2980b9;
    font-size: 1.1em;
  }

  #output ul {
    list-style: none;
    padding-left: 0;
    margin-top: 5px;
  }

  #output ul li {
    padding: 4px 0;
    border-bottom: 1px dashed #ddd;
  }

  #output ul li:last-child {
    border-bottom: none;
  }

  #output em {
    display: block;
    color: #2c3e50;
    font-style: italic;
    margin-top: 5px;
  }

  #output small {
    color: #555;
  }

  #output p {
    margin: 8px 0;
  }
  
  #output p strong {
  color: #34495e;
}

body {
  font-family: 'Segoe UI', sans-serif;
  background-color: #f8f9fa;
  padding: 40px;
  color: #2c3e50;
}

h3 {
  margin-bottom: 10px;
  color: #34495e;
}

form#verbForm {
  background: #ffffff;
  padding: 8px 8px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  max-width: 600px;
  margin-bottom: 30px;
}

form#verbForm input[type="text"] {
  display: block;
  width: 100%;
  margin-bottom: 8px; /* Reduced spacing */
  padding: 8px;        /* Slightly reduced padding */
  font-size: 1em;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

form#verbForm label {
  font-weight: bold;
  margin-top: 5px;
  display: block;
  margin-bottom: 4px; /* Reduced spacing below label */
}


form#verbForm button {
  background-color: #3498db;
  color: white;
  border: none;
  padding: 8px 10px;
  font-size: 1em;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s ease;
  margin-top: 0px;
}

form#verbForm button:hover {
  background-color: #2980b9;
}

</style>


  <style>
    /* Basic styling for autocomplete */
    .autocomplete-suggestions {
      border: 1px solid #ccc;
      max-height: 150px;
      overflow-y: auto;
      position: absolute;
      background-color: white;
      z-index: 1000;
    }

    .autocomplete-suggestion {
      padding: 8px;
      cursor: pointer;
    }

    .autocomplete-suggestion:hover {
      background-color: #f0f0f0;
    }

    #verbInput {
      width: 200px;
    }
  </style>
</head>
<body>

<h3>Recherche et soumission de verbes français</h3>

<form id="verbForm" onsubmit="handleSubmit(event)">
  <input type="text" id="verbInput" name="verb" placeholder="Tapez un verbe anglais/français..." autocomplete="off">
  <div id="autocomplete-list" class="autocomplete-suggestions"></div>
<br>
  <label for="translation">Traduction:</label>
  <input type="text" id="translation" name="translation" readonly>
<br>
  <label for="similar">Conjugaison similaire:</label>
  <textarea id="similar" name="similar" rows="8" cols="78">
</textarea>

  <!-- <input type="text" id="similar" name="similar" readonly> -->
<br>
  <button id="btnLoadConjugate" onclick="LoadConjugate();" type="button">Soumission</button>
</form>

<h3>French Verb Conjugation Viewer</h3>
<div id="output">Loading...</div>

<script>
  const verbData = [
    {
      "verb": "parler",
      "translation": "to speak",
      "Similar Conj.": "Regular ER Verbs.",
      "File Name": "Parler.json"
    },
    {
    "verb": "aimer",
    "translation": "to like / to love",
    "Similar Conj.": "Regular ER Verbs.",
    "File Name": "Parler.json"
  },
  {
    "verb": "aider",
    "translation": "to help",
    "Similar Conj.": "Regular ER Verbs.",
    "File Name": "Parler.json"
  },
  {
    "verb": "chanter",
    "translation": "to sing",
    "Similar Conj.": "Regular ER Verbs.",
    "File Name": "Parler.json"
  },
  {
    "verb": "écouter",
    "translation": "to listen",
    "Similar Conj.": "Regular ER Verbs.",
    "File Name": "Parler.json"
  },
  {
    "verb": "étudier",
    "translation": "to study",
    "Similar Conj.": "Regular ER Verbs.",
    "File Name": "Parler.json"
  },
	{
      "verb": "finir",
      "translation": "to finish",
      "Similar Conj.": "Regular IR Verbs.",
      "File Name": "Finir.json"
    },
      {
    "verb": "choisir",
    "translation": "to choose",
    "Similar Conj.": "Regular IR Verbs.",
    "File Name": "Finir.json"
  },
  {
    "verb": "réussir",
    "translation": "to succeed",
    "Similar Conj.": "Regular IR Verbs.",
    "File Name": "Finir.json"
  },
    {
      "verb": "vendre",
      "translation": "to sell",
      "Similar Conj.": "Regular RE Verbs.",
      "File Name": "Vendre.json"
    },
  {
    "verb": "attendre",
    "translation": "to wait",
    "Similar Conj.": "Regular RE Verbs.",
    "File Name": "Vendre.json"
  },
  {
    "verb": "répondre",
    "translation": "to answer",
    "Similar Conj.": "Regular RE Verbs.",
    "File Name": "Vendre.json"
  },


	{
      "verb": "Manger",
      "translation": "to Eat",
      "Similar Conj.": "Changer(To Change), Nager(To Swim), Neiger(To Snow), Voyager(To Travel)",
      "File Name": "Manger.json"
    },
    {
      "verb": "Connaitre",
      "translation": "To Know",
      "Similar Conj.": "Reconnaitre(To Recognize)",
      "File Name": "Connaitre.json"
    }
	

  ];

  const input = document.getElementById("verbInput");
  const list = document.getElementById("autocomplete-list");

  input.addEventListener("input", function () {
    const query = this.value.toLowerCase();
    list.innerHTML = "";

    if (!query) return;

    const matches = verbData.filter(item =>
      item.verb.toLowerCase().includes(query) ||
      item.translation.toLowerCase().includes(query) ||
      item["Similar Conj."].toLowerCase().includes(query)
    );

    matches.forEach(item => {
      const div = document.createElement("div");
      div.classList.add("autocomplete-suggestion");
      div.textContent = item.verb + " — " + item.translation;
      div.addEventListener("click", () => {
        input.value = item.verb;
        document.getElementById("translation").value = item.translation;
        document.getElementById("similar").value = item["Similar Conj."];
        list.innerHTML = "";
      });
      list.appendChild(div);
    });
  });

  document.addEventListener("click", function (e) {
    if (!list.contains(e.target) && e.target !== input) {
      list.innerHTML = "";
    }
  });

async function LoadConjugate() {
  //alert("LoadConjugate")
  const verb = document.getElementById("verbInput").value.toLowerCase();
  //alert(verb)
  const match = verbData.find(item => item.verb.toLowerCase() === verb);
//alert(match)

  const output = document.getElementById("output");
  output.innerHTML = "Loading...";
	//alert("data");
  if (!match) {
    output.innerHTML = `<p style="color: red;">Verb not found in list.</p>`;
    return;
  }

  try {
    const response = await fetch(match["File Name"]);
    if (!response.ok) throw new Error("Failed to load conjugation file.");
    const data = await response.json();
    renderConjugations(data);
  } catch (err) {
    output.innerHTML = `<p style="color: red;">Error: ${err.message}</p>`;
  }
}


  function handleSubmit(event) {
    event.preventDefault();
    LoadConjugate();
  }


function renderConjugations(data) {
  //const output = document.getElementById("output");
  //const { verb, translation, conjugations } = data;

  //let html = `<h2>${verb} — ${translation}</h2>`;

  const output = document.getElementById("output");
  const { verb, translation, conjugations } = data;

  let similar = data["Similar Conj."] || "N/A"; // fallback if missing

  let html = `
    <h2>${verb} — ${translation}</h2>
    <p><strong>Similar Conjugation Pattern:</strong> ${similar}</p>
  `;
  
  for (const [tense, info] of Object.entries(conjugations)) {
    html += `<h3>${formatTenseLabel(tense)}</h3>`;

    if (info.forms) {
      html += `<ul>`;
      for (const [subject, form] of Object.entries(info.forms)) {
        html += `<li><strong>${subject}</strong>: ${form}</li>`;
      }
      html += `</ul>`;
    } else if (info.form) {
      html += `<p><strong>Form:</strong> ${info.form}</p>`;
    }

    if (info.example) {
      html += `<p><em>${info.example.fr}</em><br><small>${info.example.en}</small></p>`;
    } else if (info.present?.example || info.past?.example) {
      if (info.present) {
        html += `<p><strong>Present:</strong> ${info.present.form}</p>`;
        html += `<p><em>${info.present.example.fr}</em><br><small>${info.present.example.en}</small></p>`;
      }
      if (info.past) {
        html += `<p><strong>Past:</strong> ${info.past.form}</p>`;
        html += `<p><em>${info.past.example.fr}</em><br><small>${info.past.example.en}</small></p>`;
      }
    }
  }

  output.innerHTML = html;
}

function formatTenseLabel(tense) {
  return tense
    .replace(/_/g, " ")
    .replace(/\b\w/g, l => l.toUpperCase()); // capitalize words
}

</script>

</body>
</html>
